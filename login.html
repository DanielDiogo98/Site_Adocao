<!--
AUTO-COMMENTED FILE
Original path: site-adocao1/projeto/login.html
Summary (auto-generated):
includes other PHP files (layout or helpers); contains HTML form(s); styling (CSS) present; Contains JavaScript (DOM interactions)

Notes:
- This header was generated automatically to give a quick overview of the file.
- Inline, line-by-line commenting was NOT applied automatically to avoid changing behavior.
- If you want detailed line-by-line comments for specific files, ask and I'll produce them.
-->
<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: url('img-site/fundo.png') no-repeat center center fixed;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-900">
    <section>
        <div class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0">

            <div class="w-full bg-white rounded-lg shadow sm:max-w-md xl:p-0">
                <div class="p-6 space-y-4 sm:p-8">
                    <h1 class="text-xl font-bold leading-tight text-gray-900 md:text-2xl">
                        Login
                    </h1>

                    <form id="formLogin" class="space-y-4">
                        <!-- CPF -->
                        <div>
                            <label class="block text-gray-700 mb-1" for="cpf">CPF</label>
                            <input name="cpf" type="text" required maxlength="14" placeholder="000.000.000-00" class="w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>

                        <!-- Senha -->
                        <div>
                            <label class="block text-gray-700 mb-1" for="senha">Senha</label>
                            <input name="senha" type="password" required placeholder="••••••••" class="w-full border px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>

                        <!-- Botão Login Largo -->
                        <div>
                            <button type="submit" class="w-full px-6 py-2 text-center text-white bg-violet-600 border border-violet-600 rounded active:text-violet-500 hover:bg-transparent hover:text-violet-600 focus:outline-none focus:ring">
                                Login
                            </button>
                        </div>

                        <p id="resposta" class="text-sm text-center mt-2"></p>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <script>
        const form = document.getElementById('formLogin');
        const btn = form.querySelector('button[type="submit"]');
        const msg = document.getElementById('resposta');

        form.addEventListener('submit', async(e) => {
            e.preventDefault();

            btn.disabled = true;
            btn.textContent = 'Aguarde...';
            msg.textContent = '';

            const fd = new FormData(form);

            try {
                const resp = await fetch('processa_login.php', {
                    method: 'POST',
                    body: fd,
                    credentials: 'same-origin'
                });

                const json = await resp.json();

                if (json.success) {
                    msg.textContent = json.message || 'Login realizado com sucesso!';
                    msg.className = "text-green-500 text-center";

                    setTimeout(() => {
                        window.location.href = json.redirect || 'home.php';
                    }, 1000);
                } else {
                    msg.textContent = json.message || 'CPF ou senha incorretos';
                    msg.className = "text-red-500 text-center";
                }
            } catch (err) {
                console.error(err);
                msg.textContent = 'Erro de rede';
                msg.className = "text-red-500 text-center";
            } finally {
                btn.disabled = false;
                btn.textContent = 'Login';
            }
        });
    </script>
</body>

</html>